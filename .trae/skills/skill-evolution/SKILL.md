---
name: "skill-evolution"
description: "实现AI代理自我进化能力，基于GEP协议分析运行时错误，自动修复和改进技能。支持能力继承和知识共享。"
---

# 技能进化引擎

## 进化架构

### GEP协议实现（Genome Evolution Protocol）
- **基因（Genes）**: 原子能力单元（如文件读取、API调用）
- **胶囊（Capsules）**: 成功任务执行路径封装
- **事件（Events）**: 不可变的进化日志记录

### 进化循环
1. **扫描**: 监控运行时日志，识别错误和停滞
2. **信号**: 将非结构化日志转换为标准化进化信号
3. **意图**: 基于信号规划进化方向（修复bug或优化性能）
- **变异**: 生成新的代码或提示策略
- **验证**: 在沙箱中执行并通过测试
- **固化**: 将新能力写入基因库完成进化

## 核心功能

### 1. 自动日志分析
- 实时分析stderr和stdout输出
- 识别堆栈跟踪和精确定位错误位置
- 检测重复错误模式和性能瓶颈

### 2. 自我修复模式
- 当检测到崩溃或工具调用失败时进入修复模式
- 自动修改代码或参数直到测试通过
- 防止修复循环通过信号去重

### 3. 创新能力授权
- 遵循70/30规则：70%计算维护稳定性，30%探索新能力
- 防止局部最优陷阱
- 可配置的策略预设（平衡/创新/加固/仅修复）

### 4. 安全爆炸半径控制
- 严格的修改限制防止"失控进化"
- 每次变更最多60个文件限制
- 核心内核文件禁止修改

## 使用方法

```bash
# 启用进化模式
export NIBOT_EVOLUTION_ENABLED=true

# 配置进化策略
export NIBOT_EVOLUTION_STRATEGY=balanced  # balanced|innovate|harden|repair-only

# 设置进化日志路径
export NIBOT_EVOLUTION_LOG=/path/to/evolution.log
```

## 进化策略预设

- **balanced**: 平衡修复和新功能开发
- **innovate**: 最大化新功能探索（30%修复，70%创新）
- **harden**: 专注于稳定性加固
- **repair-only**: 紧急修复模式，仅修复已知问题

## 集成能力

此技能与Ni bot的以下系统集成：
- 会话管理系统（session.go）
- 工具执行框架（tools.go）
- 技能管理系统（skills.go）
- 健康监控系统（health.go）

## 安全考虑

- 所有进化变更都需要人工审核模式
- 核心系统文件受到保护禁止修改
- 进化过程完全可审计和可回滚